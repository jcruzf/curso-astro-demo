---
import Layout from "../../layouts/Layout.astro";
import { getLaunchBy, getLatestLaunches } from '../../services/spacex'

const {id} = Astro.params

let launch 
if (id){
  launch = await getLaunchBy({id})
}

export async function getStaticPaths() {
  // llamar a una api externa
  // para saber todas las id's que debes generar

  const launches = await getLatestLaunches()

  return launches.map((launch) => ({
    params: {id: launch.id},
  }))
  
}
---
<Layout title="Lanzamiento ${id}">
  <article>
    {launch?.id}
  </article>
</Layout>